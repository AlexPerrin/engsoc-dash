<% content_for :title, "Manage Job Postings" %>

<div class="container container-fluid">
    <div class="mb-lg text-right">
        <button type="button" class="btn btn-default">
          <em class="ion-plus mr-sm"></em>Submit Job Posting
        </button>
      </div>
<!-- main container for job postings -->
<div class="container-fluid container-md">
  <div class="card">
    <div class="card-body">
      <p class="lead">Waiting Approval</p>
      <ul class="list-group">
        <% @approval_job_postings.each do |posting| %>
          <li class="list-group-item">
            <% if can? :submit_job_postings, posting %>
              <div class="pull-right dropdown">
                <%= status_label(posting) %>
                <% if can? :approve_job_postings, posting %>      
                        <%= render 'index_dropdown', :posting => posting %>
  
                <% end %>      
              </div>
            <% end %>
            <!-- show the job title and link to the job posting detail -->
            <h5 class="mb-sm">
              <%= link_to job_posting_path(posting), class: "ripple" do %>
                <%= posting.title %>
              <% end %>
            </h5>
            <!-- display the application deadline -->
            <p class="text-soft">
                Application Deadline: <%= distance_of_time_in_words(Time.now, posting.deadline) %>
            </p>
            <!-- show the truncated job posting description -->
            <p>
              <%= h truncate(posting.description, :length => 270) %>
            </p>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
</div>
